<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MaaYuan å¯¼èˆªç«™</title>
    <link rel="icon" href="assets/logo.png" type="image/png" />
    <style>
      body {
        margin: 0;
        padding: 0;
        font-family: "Microsoft YaHei", Arial, sans-serif;
        background-color: #f6edd0;
        background-image: url("assets/background-pattern.png");
        background-repeat: repeat;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        position: relative;
      }

      .container {
        max-width: 1000px;
        width: 100%;
        text-align: center;
        padding: 20px;
        box-sizing: border-box;
      }

      .content-row {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 20px;
      }

      .image-container,
      .normal-content {
        flex: 1 1 0;
        max-width: 50%;
        min-width: 300px;
        box-sizing: border-box;
      }

      .image-container {
        position: relative;
        cursor: pointer;
        flex: 0 0 auto;
        max-width: 50%;
        min-height: 200px;
        display: flex;
        justify-content: center;
        align-items: center;
        background-color: transparent;
        width: 500px;
        height: 500px;
        overflow: hidden;
      }

      .preload-container {
        width: 0;
        height: 0;
        overflow: hidden;
        position: absolute;
        top: -9999px;
        left: -9999px;
      }

      .image-container img {
        max-width: 100%;
        opacity: 0;
        transition: opacity 0.3s ease;
        position: relative;
        background-color: transparent;
        z-index: 1;
        max-height: 100%;
        object-fit: contain;
        background-color: transparent;
      }

      .image-container img.loaded {
        opacity: 1;
      }

      .image-tooltip {
        visibility: hidden;
        background-color: rgba(0, 0, 0, 0.75);
        color: #fff;
        text-align: center;
        padding: 8px 12px;
        border-radius: 6px;
        font-size: 14px;
        position: absolute;
        z-index: 20;
        white-space: nowrap;
        opacity: 0;
        transition: opacity 0.3s;
        pointer-events: none;
      }

      .image-container:hover .image-tooltip {
        visibility: visible;
        opacity: 1;
      }

      .overlay-text {
        flex: 1 1 300px;
        font-size: 36px;
        font-weight: bold;
        color: #493b2c;
        text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.3);
        padding: 20px;
        background-color: #dfcbb2;
        border-radius: 10px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      }

      .hint-text {
        display: block;
        font-size: 16px;
        font-weight: normal;
        color: #666;
        margin-top: 15px;
      }

      .highlight-text {
        color: rgba(194, 132, 0, 0.87);
        cursor: help;
        position: relative;
        transition: color 0.3s;
      }

      .highlight-text:hover {
        color: rgb(206, 144, 12);
      }

      .highlight-text .tooltip {
        visibility: hidden;
        background-color: #333;
        color: #fff;
        text-align: center;
        padding: 5px 10px;
        border-radius: 4px;
        font-size: 14px;
        font-weight: normal;
        position: absolute;
        z-index: 10;
        bottom: 100%;
        left: 50%;
        transform: translateX(-50%);
        white-space: nowrap;
        opacity: 0;
        transition: opacity 0.3s;
      }

      .highlight-text:hover .tooltip {
        visibility: visible;
        opacity: 1;
      }

      .highlight-text .tooltip::after {
        content: "";
        position: absolute;
        top: 10%;
        left: 50%;
        margin-left: -5px;
        border-width: 5px;
        border-style: solid;
        border-color: #333 transparent transparent transparent;
      }

      .version-badge {
        position: relative;
        display: inline-flex;
        align-items: center;
        gap: 6px;
        padding: 2px 8px;
        margin: 0 4px;
        border-radius: 8px;
        background-color: rgba(255, 255, 255, 0.4);
        color: inherit;
        cursor: pointer;
        transition: background-color 0.2s ease, box-shadow 0.2s ease;
        outline: none;
      }

      .version-badge:hover {
        background-color: rgba(255, 255, 255, 0.6);
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      }

      .version-badge:focus-visible {
        box-shadow: 0 0 0 3px rgba(206, 144, 12, 0.5);
      }

      .version-badge .version-popover {
        position: absolute;
        top: calc(100% + 12px);
        left: 50%;
        transform: translateX(-50%) translateY(-6px);
        background-color: rgba(0, 0, 0, 0.85);
        color: #fff;
        padding: 10px 14px;
        border-radius: 10px;
        font-size: 14px;
        line-height: 1.5;
        min-width: 320px;
        max-width: 560px;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.2s ease, transform 0.2s ease;
        pointer-events: none;
        text-align: left;
        white-space: normal;
      }

      .version-badge .version-popover::before {
        content: "";
        position: absolute;
        bottom: 100%;
        left: 50%;
        transform: translateX(-50%);
        border-width: 6px;
        border-style: solid;
        border-color: transparent transparent rgba(0, 0, 0, 0.85) transparent;
      }

      .version-badge:hover .version-popover,
      .version-badge:focus-within .version-popover,
      .version-badge.popover-visible .version-popover {
        opacity: 1;
        visibility: visible;
        transform: translateX(-50%) translateY(0);
      }

      .mirror-panel-backdrop {
        position: fixed;
        inset: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 20px;
        background-color: rgba(0, 0, 0, 0.3);
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.25s ease;
        z-index: 200;
      }

      .mirror-panel-backdrop.active {
        opacity: 1;
        visibility: visible;
      }

      .mirror-panel {
        background-color: #fff8ec;
        color: #2a251a;
        border-radius: 16px;
        padding: 28px;
        max-width: 420px;
        width: 100%;
        box-shadow: 0 16px 40px rgba(0, 0, 0, 0.2);
        position: relative;
      }

      .mirror-panel h4 {
        margin: 0 0 10px;
        font-size: 22px;
        color: #493b2c;
      }

      .mirror-description {
        margin: 0 0 18px;
        font-size: 14px;
        color: #666;
      }

      .mirror-links {
        display: grid;
        grid-template-columns: repeat(2, minmax(0, 1fr));
        gap: 14px;
      }

      .mirror-links a {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        padding: 12px;
        background-color: #dfcfb2;
        border-radius: 10px;
        text-decoration: none;
        color: #493b2c;
        font-weight: 600;
        box-shadow: 0 6px 16px rgba(0, 0, 0, 0.12);
        transition: transform 0.2s ease, box-shadow 0.2s ease;
      }

      .mirror-links a:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 22px rgba(0, 0, 0, 0.18);
      }

      .mirror-links a:focus-visible {
        outline: 2px solid rgba(206, 144, 12, 0.7);
        outline-offset: 3px;
      }

      .mirror-close {
        position: absolute;
        top: 14px;
        right: 14px;
        background: transparent;
        border: none;
        color: #9c7a4d;
        font-size: 24px;
        cursor: pointer;
        width: 36px;
        height: 36px;
        padding: 0;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        border-radius: 50%;
        transition: background-color 0.2s ease, color 0.2s ease;
      }

      .mirror-close:hover,
      .mirror-close:focus-visible {
        background-color: rgba(0, 0, 0, 0.08);
        color: #493b2c;
        outline: none;
      }

      @media (max-width: 480px) {
        .mirror-panel {
          padding: 24px 20px;
        }

        .mirror-links {
          grid-template-columns: 1fr;
        }
      }

      .normal-content {
        /* æ¢å¤åŸæœ‰æ ·å¼ï¼Œä»…ç§»é™¤ display: none; */
        flex: 1 1 300px;
        text-align: left;
        padding: 20px;
        background-color: #dfcfb2;
        border-radius: 10px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        position: relative;
        z-index: 10;
        display: block;
      }

      .normal-content h2 {
        color: #493b2c;
        margin-top: 0;
        text-shadow: 1px 1px 3px rgba(255, 251, 251, 0.805);
      }

      .normal-content h3 {
        color: #493b2c;
        margin-top: 10px;
        text-shadow: 1px 1px 3px rgba(255, 251, 251, 0.805);
      }

      .normal-content p {
        color: #2a251a;
        line-height: 1.6;
        text-shadow: 1px 1px 3px rgba(255, 251, 251, 0.805);
      }

      .normal-content a {
        display: inline-block;
        margin-top: 10px;
        padding: 8px 16px;
        background-color: #d78935;
        color: #d8dff3;
        text-decoration: none;
        border-radius: 5px;
        font-weight: bold;
        width: 150px;
        margin: 10px;
        text-align: center;
        box-sizing: border-box;
      }

      .normal-content a:hover {
        background-color: rgba(214, 156, 29, 0.87);
      }

      .normal-content .text-link {
        display: inline;
        margin: 0;
        padding: 0;
        background-color: transparent;
        color: #b76b0f;
        font-weight: normal;
        width: auto;
      }

      .normal-content .text-link:hover {
        background-color: transparent;
        color: #8f5112;
      }

      .click-area {
        position: absolute;
        width: 200px;
        height: 200px;
        top: 60%;
        left: 50%;
        transform: translate(-50%, -50%);
        z-index: 5;
        cursor: pointer;
      }

      /* ç§»åŠ¨ç«¯ä¼˜åŒ– */
      @media (max-width: 768px) {
        .content-row {
          flex-direction: column;
          gap: 15px;
        }
        .image-container,
        .normal-content {
          max-width: 100%;
          min-width: 0;
        }
        .container {
          padding: 15px 10px;
        }
        .image-container {
          max-width: 100%;
          width: 100%;
          height: auto;
          max-height: 400px;
        }
        .image-container img {
          max-width: 100%;
          max-height: 350px;
        }
        .overlay-text,
        .normal-content {
          font-size: 22px;
          width: 95%;
          padding: 15px;
          margin: 0 auto;
        }
        .overlay-text {
          max-height: 100px; /* é™åˆ¶æœ€å¤§é«˜åº¦ */
        }
        .hint-text {
          font-size: 14px;
          margin-top: 10px;
        }
        .normal-content h2 {
          font-size: 24px;
        }
        .normal-content h3 {
          font-size: 20px;
        }
        .normal-content p {
          font-size: 16px;
        }
        .normal-content a {
          width: 40%;
          margin: 10px auto;
          padding: 12px 15px;
          border-radius: 8px;
          font-size: 16px;
          text-align: center;
          display: block;
        }
        .normal-content .text-link {
          display: inline;
          width: auto;
          margin: 0;
          padding: 0;
          border-radius: 0;
          background-color: transparent;
        }
        .click-area {
          width: 150px;
          height: 150px;
        }
        /* æ”¹è¿›tooltipçš„è§¦æ‘¸äº¤äº’ */
        .image-tooltip {
          max-width: 90%;
          padding: 10px 15px;
          font-size: 14px;
          line-height: 1.5;
          left: 50% !important;
          transform: translateX(-50%);
          bottom: 20px;
          top: auto !important;
        }
      }

      /* å°å±å¹•æ‰‹æœºä¼˜åŒ– */
      @media (max-width: 480px) {
        .image-container {
          height: 300px;
          max-height: 300px;
        }
        .image-container img {
          max-height: 250px;
        }
        .overlay-text {
          height: auto;
          min-height: 0;
          max-height: 100px; /* é™åˆ¶æœ€å¤§é«˜åº¦ */
          padding: 15px 10px;
          font-size: 22px;
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          width: 90%;
          margin: 0 auto;
        }
        .hint-text {
          margin-top: 10px;
          font-size: 14px;
          line-height: 1.3;
        }
        .normal-content {
          font-size: 18px;
          padding: 15px;
          width: 90%;
          margin: 0 auto;
        }
        .normal-content h2 {
          font-size: 20px;
        }
        .normal-content h3 {
          font-size: 18px;
        }
        .normal-content a {
          width: 80%;
          margin: 8px auto;
          padding: 10px;
        }
      }

      /* æ·»åŠ å»¶è¿ŸåŠ è½½æ ·å¼ */
      .lazy-load {
        opacity: 0;
        transition: opacity 0.5s ease;
      }

      .lazy-load.loaded {
        opacity: 1;
      }

      /* ç§»åŠ¨ç«¯è§¦æ‘¸åé¦ˆ */
      @media (hover: none) {
        .image-container:active {
          transform: scale(0.98);
        }
        .normal-content a:active {
          background-color: #b5681f;
        }
      }

      /* è®©ä¸‹è½½é“¾æ¥åŒºåŸŸæ›´æ•´é½ */
      .normal-content .download-links {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        margin-top: 10px;
      }
    </style>
  </head>
  <body>
    <!-- é¢„åŠ è½½æ‰€æœ‰å¯èƒ½ç”¨åˆ°çš„å›¾ç‰‡ -->
    <div class="preload-container">
      <img src="assets/cat.png" alt="çŒ«å›¾é¢„åŠ è½½" />
      <img src="assets/dog.png" alt="ç‹—å›¾é¢„åŠ è½½" />
      <img src="assets/fox1.png" alt="ç‹å›¾1é¢„åŠ è½½" />
      <img src="assets/fox2.png" alt="ç‹å›¾2é¢„åŠ è½½" />
      <img src="assets/bird.png" alt="é¸Ÿå›¾é¢„åŠ è½½" />
      <img src="assets/angel.png" alt="å¤©ä½¿å›¾é¢„åŠ è½½" />
      <img src="assets/bee.png" alt="èœœèœ‚å›¾é¢„åŠ è½½" />
      <img src="assets/bull1.png" alt="ç‰›å›¾1é¢„åŠ è½½" />
      <img src="assets/bull2.png" alt="ç‰›å›¾2é¢„åŠ è½½" />
      <img src="assets/bunny1.png" alt="å…”å›¾1é¢„åŠ è½½" />
      <img src="assets/bunny2.png" alt="å…”å›¾2é¢„åŠ è½½" />
      <img src="assets/devil.png" alt="æ¶é­”å›¾é¢„åŠ è½½" />
      <img src="assets/grey.png" alt="ç°çš®å›¾é¢„åŠ è½½" />
      <img src="assets/leopard.png" alt="è±¹å›¾é¢„åŠ è½½" />
      <img src="assets/niulang.png" alt="ç‰›éƒå›¾é¢„åŠ è½½" />
      <img src="assets/zhinv.png" alt="ç»‡å¥³å›¾é¢„åŠ è½½" />
      <img src="assets/birthday.png" alt="å‘¨å²å›¾é¢„åŠ è½½" />
      <img src="assets/detective.png" alt="ä¾¦æ¢å›¾é¢„åŠ è½½" />
      <img src="assets/flower.png" alt="ç°ªèŠ±å›¾é¢„åŠ è½½" />
      <img src="assets/ghost.png" alt="å¹½çµå›¾é¢„åŠ è½½" />
      <img src="assets/hunhun.png" alt="é­‚é­‚å›¾é¢„åŠ è½½" />
      <img src="assets/McDonald's.png" alt="éº¦éº¦å›¾é¢„åŠ è½½" />
      <img src="assets/niuniu.png" alt="ç‰›ç‰›å›¾é¢„åŠ è½½" />
      <img src="assets/pumpkin.png" alt="å—ç“œå›¾é¢„åŠ è½½" />
      <img src="assets/witch.png" alt="é­”å¥³å›¾é¢„åŠ è½½" />
    </div>

    <div class="container">
      <div class="content-row">
        <div class="image-container">
          <img
            id="randomImage"
            src=""
            alt="éº»åœ†æ„šäººèŠ‚å½©è›‹"
            width="500"
            height="500"
          />
          <div class="image-tooltip">ğŸ˜­ æ±‚ä½ åˆ«çœ‹äº†ï¼Œæˆ³å°±å®Œäº‹äº†</div>
        </div>
        <div class="normal-content" id="normalContent" style="display: block">
          <h2>ğŸ¥³ æ„Ÿè°¢å…³æ³¨ MaaYuan é¡¹ç›®</h2>
          <p>MaaYuan æ˜¯åŸºäºå›¾åƒè¯†åˆ«çš„ä»£å·é¸¢/å¦‚é¸¢ä¸€é”®é•¿è‰å°åŠ©æ‰‹ã€‚</p>
          <p>
            æœ¬é¡¹ç›®å…è´¹å¼€æºï¼Œä»…é€šè¿‡æ¸¸æˆæä¾›çš„ç”¨æˆ·ç•Œé¢ä¸æ¸¸æˆç¨‹åºè¿›è¡Œäº¤äº’ï¼Œä¸ä¼šè¯»å–æˆ–ä¿®æ”¹æ¸¸æˆçš„æ–‡ä»¶æˆ–ä»£ç ã€‚
          </p>
          <p>ä»¥ä¸‹è¾…åŠ©é¡¹ç›®åŒæ­¥å¼€å‘ä¸­ï¼Œæ¬¢è¿è´¡çŒ®ä»£ç ï¼š</p>
          <p>
            Â· å¯è§†åŒ–ç•Œé¢ -
            <a
              href="https://github.com/syoius/MFAAvalonia"
              class="text-link"
              target="_blank"
              >YuanMFA</a
            >ï¼ˆç°å·²æ”¯æŒ Winã€Macã€Linuxï¼‰
          </p>
          <p>
            Â· æˆ˜æ–—ä½œä¸šç¼–è¾‘å™¨ -
            <a
              href="https://github.com/syoius/MaaYuan-SiMing"
              class="text-link"
              target="_blank"
              >å¸å‘½</a
            >
            ï¼ˆæ”¯æŒ
            <a
              href="https://siming.maayuan.top/"
              class="text-link"
              target="_blank"
              >ç½‘é¡µç‰ˆ</a
            >
            åœ¨çº¿ä½¿ç”¨ï¼‰
          </p>
          <h3>
            ğŸ’¾ è·å– MaaYuan
            <span
              class="version-badge"
              tabindex="0"
              role="button"
              aria-haspopup="true"
              aria-expanded="false"
            >
              âœ¨ v1.0.0 æ­£å¼ç‰ˆ
              <span class="version-popover" role="tooltip">
                é€‚é… ğŸ¾ å¦‚é¸¢ Â· ç’ƒé­‚æœˆé­„ ğŸ¾ ä»£å·é¸¢ Â· æœæ­Œä¹‹æˆ˜ ğŸ¾<br /><br />
                - ã€ğŸ®
                æŠ„ä½œä¸šä¸“å±ç•Œé¢ã€‘è®¿é—®å…¨æ–°ä½œä¸šç«™è·å¾—ç¥ç§˜ä»£ç ï¼Œå¯ä¸€é”®å¯¼å…¥å¯¹åº”ä½œä¸šæ–‡ä»¶ã€‚éšå¿ƒä¿å­˜å¤šä»½ä½œä¸šï¼Œéšæ—¶åˆ‡æ¢ä½¿ç”¨ã€‚<br />
                - ã€ğŸ´ æœæ­Œä¹‹æˆ˜
                V2ã€‘å›¤èµ„æºå°åŠ©æ‰‹ï¼Œå¯é…åˆç½‘é¡µä¸‹æ–¹çš„[bossæˆ˜ä¹Ÿè¦å…¨è‡ªåŠ¨æ”»ç•¥]ï¼Œåˆ†æ­¥è·Ÿæ‰“ï¼Œè‡ªåŠ¨è®°å½•æ”»ç•¥è¿›åº¦ã€‚<br />
                - ã€ğŸ”¨ éš†åœ°å†¬ç›¸å…³ã€‘é€‚é…å¦‚é¸¢ï¼Œä¿®å¤ä¸è¿›è¡Œå®¶å…·æ‰“é€ çš„ bug
              </span>
            </span>
          </h3>
          <div class="download-links">
            <a href="https://start.maayuan.top" target="_blank">æ–°æ‰‹å¿…çœ‹</a>
            <a href="https://doc.maayuan.top" target="_blank">ä½¿ç”¨æ–‡æ¡£</a>
            <a
              href="#cn-mirror"
              class="mirror-trigger"
              role="button"
              aria-controls="cnMirrorPanel"
              aria-expanded="false"
              >å›½å†…åˆ†æµ</a
            >
            <a href="https://github.com/syoius/MaaYuan" target="_blank"
              >GitHub ä»“åº“</a
            >
          </div>
          <p style="text-align: center">
            <a
              href="https://mirrorchyan.com/zh/projects?rid=MaaYuan&source=navtop"
              class="text-link"
              target="_blank"
              >å·²æœ‰ Mirroré…± CDKï¼Ÿå‰å¾€ Mirroré…± é«˜é€Ÿä¸‹è½½</a
            >
          </p>
          <h3>ğŸ”— å…¶ä»–å®ç”¨é“¾æ¥</h3>
          <div class="download-links">
            <a href="https://pd.qq.com/s/7blnnchll" target="_blank"
              >äº¤æµåé¦ˆé¢‘é“</a
            >
            <a href="https://share.maayuan.top/" target="_blank"
              >å…¨æ–°æˆ˜æ–—ä½œä¸šç«™</a
            >
            <a href="https://zhaoge.maayuan.top" target="_blank"
              >æœæ­Œå…¨è‡ªåŠ¨æ”»ç•¥</a
            >
            <a href="" target="_blank">å¹¿å‘Šä½æ‹›ç§Ÿï¼ˆï¼Ÿ</a>
          </div>
        </div>
      </div>
    </div>

    <div
      class="mirror-panel-backdrop"
      id="cnMirrorBackdrop"
      hidden
      aria-hidden="true"
    >
      <div
        class="mirror-panel"
        id="cnMirrorPanel"
        role="dialog"
        aria-labelledby="cnMirrorTitle"
        tabindex="-1"
      >
        <button
          type="button"
          class="mirror-close"
          aria-label="å…³é—­å›½å†…åˆ†æµé¢æ¿"
        >
          Ã—
        </button>
        <h4 id="cnMirrorTitle">å›½å†…åˆ†æµ</h4>
        <p class="mirror-description">é€‰æ‹©ä¸€ä¸ªç½‘ç›˜è·å–ä¸‹è½½é“¾æ¥ï¼š</p>
        <div class="mirror-links">
          <a
            href="https://docs.qq.com/aio/DS1BMQmpiQkdOb1RT?p=F3pe85z8D7TqvdZcgdqBTF&client_hint=0#7caQRuA7LLNxP4Ub1xdLoc"
            target="_blank"
            rel="noopener"
            >è…¾è®¯æ–‡æ¡£</a
          >
          <a
            href="https://pan.quark.cn/s/6aac698cc09c"
            target="_blank"
            rel="noopener"
            >å¤¸å…‹ç½‘ç›˜(æå–ç aSjp)</a
          >
          <a
            href="https://www.123865.com/s/iFtSjv-E7QV?pwd=yuan#"
            target="_blank"
            rel="noopener"
            >123 äº‘ç›˜</a
          >
          <a
            href="https://pan.baidu.com/s/1iONHXFD3p-UkMTPMMvEPFQ?pwd=yuan"
            target="_blank"
            rel="noopener"
            >ç™¾åº¦ç½‘ç›˜</a
          >
        </div>
      </div>
    </div>

    <script>
      // é¡µé¢åŠ è½½å®Œæˆåæ‰§è¡Œ
      document.addEventListener("DOMContentLoaded", function () {
        const versionBadge = document.querySelector(".version-badge");
        if (versionBadge) {
          const updateExpanded = (expanded) => {
            versionBadge.setAttribute(
              "aria-expanded",
              expanded ? "true" : "false"
            );
          };
          const hidePopover = () => {
            versionBadge.classList.remove("popover-visible");
            updateExpanded(false);
          };
          updateExpanded(false);
          versionBadge.addEventListener("click", function (event) {
            event.stopPropagation();
            const willShow =
              !versionBadge.classList.contains("popover-visible");
            versionBadge.classList.toggle("popover-visible", willShow);
            updateExpanded(willShow);
          });
          versionBadge.addEventListener("keydown", function (event) {
            if (event.key === "Enter" || event.key === " ") {
              event.preventDefault();
              const willShow =
                !versionBadge.classList.contains("popover-visible");
              versionBadge.classList.toggle("popover-visible", willShow);
              updateExpanded(willShow);
            } else if (event.key === "Escape") {
              hidePopover();
            }
          });
          document.addEventListener("click", function (event) {
            if (!versionBadge.contains(event.target)) {
              hidePopover();
            }
          });
          document.addEventListener("keydown", function (event) {
            if (event.key === "Escape") {
              hidePopover();
            }
          });
        }

        const mirrorTrigger = document.querySelector(".mirror-trigger");
        const mirrorBackdrop = document.getElementById("cnMirrorBackdrop");
        const mirrorPanel = document.getElementById("cnMirrorPanel");
        const mirrorCloseButton = document.querySelector(".mirror-close");
        const openMirrorPanel = () => {
          if (!mirrorTrigger || !mirrorBackdrop || !mirrorPanel) {
            return;
          }
          mirrorBackdrop.hidden = false;
          requestAnimationFrame(() => {
            mirrorBackdrop.classList.add("active");
            mirrorBackdrop.setAttribute("aria-hidden", "false");
            mirrorTrigger.setAttribute("aria-expanded", "true");
            mirrorPanel.focus();
          });
        };
        const closeMirrorPanel = () => {
          if (!mirrorTrigger || !mirrorBackdrop) {
            return;
          }
          mirrorBackdrop.classList.remove("active");
          mirrorBackdrop.setAttribute("aria-hidden", "true");
          mirrorTrigger.setAttribute("aria-expanded", "false");
          setTimeout(() => {
            if (!mirrorBackdrop.classList.contains("active")) {
              mirrorBackdrop.hidden = true;
            }
          }, 250);
        };
        if (mirrorTrigger && mirrorBackdrop && mirrorPanel) {
          mirrorTrigger.addEventListener("click", function (event) {
            event.preventDefault();
            openMirrorPanel();
          });
          mirrorTrigger.addEventListener("keydown", function (event) {
            if (event.key === " " || event.key === "Enter") {
              event.preventDefault();
              openMirrorPanel();
            }
          });
          if (mirrorCloseButton) {
            mirrorCloseButton.addEventListener("click", function (event) {
              event.preventDefault();
              closeMirrorPanel();
              mirrorTrigger.focus();
            });
          }
          mirrorBackdrop.addEventListener("click", function (event) {
            if (event.target === mirrorBackdrop) {
              closeMirrorPanel();
              mirrorTrigger.focus();
            }
          });
          document.addEventListener("keydown", function (event) {
            if (
              event.key === "Escape" &&
              mirrorBackdrop.classList.contains("active")
            ) {
              closeMirrorPanel();
              mirrorTrigger.focus();
            }
          });
        }

        function checkImagesExist() {
          function imageExists(url, callback) {
            const img = new Image();
            img.onload = function () {
              callback(true);
            };
            img.onerror = function () {
              callback(false);
            };
            img.src = url;
          }
          const checkPromises = [];
          [
            "assets/cat-mobile.png",
            "assets/dog-mobile.png",
            "assets/fox1-mobile.png",
            ,
            "assets/fox2-mobile.png",
            "assets/angel-mobile.png",
            "assets/bee-mobile.png",
            "assets/bull1-mobile.png",
            "assets/bull2-mobile.png",
            "assets/bunny1-mobile.png",
            "assets/bunny2-mobile.png",
            "assets/devil-mobile.png",
            "assets/grey-mobile.png",
            "assets/leopard-mobile.png",
            "assets/niulang-mobile.png",
            "assets/zhinv-mobile.png",
            "assets/birthday-mobile.png",
            "assets/detective-mobile.png",
            "assets/flower-mobile.png",
            "assets/ghost-mobile.png",
            "assets/hunhun-mobile.png",
            "assets/McDonald's-mobile.png",
            "assets/niuniu-mobile.png",
            "assets/pumpkin-mobile.png",
            "assets/witch-mobile.png",
          ].forEach((path) => {
            checkPromises.push(
              new Promise((resolve) => {
                imageExists(path, (exists) => {
                  resolve({ path: path, exists: exists });
                });
              })
            );
          });
          return Promise.all(checkPromises);
        }

        checkImagesExist().then((results) => {
          const hasMobileImages = results.some((result) => result.exists);
          const imageConfig = {
            desktop: {
              paths: [
                "assets/cat.png",
                "assets/dog.png",
                "assets/fox1.png",
                "assets/fox2.png",
                "assets/bird.png",
                "assets/angel.png",
                "assets/bee.png",
                "assets/bull1.png",
                "assets/bull2.png",
                "assets/bunny1.png",
                "assets/bunny2.png",
                "assets/devil.png",
                "assets/grey.png",
                "assets/leopard.png",
                "assets/niulang.png",
                "assets/zhinv.png",
                "assets/birthday.png",
                "assets/detective.png",
                "assets/flower.png",
                "assets/ghost.png",
                "assets/hunhun.png",
                "assets/McDonald's.png",
                "assets/niuniu.png",
                "assets/pumpkin.png",
                "assets/witch.png",
              ],
              width: 500,
              height: 500,
            },
            mobile: {
              paths: hasMobileImages
                ? [
                    "assets/cat-mobile.png",
                    "assets/dog-mobile.png",
                    "assets/fox1-mobile.png",
                    ,
                    "assets/fox2-mobile.png",
                    "assets/angel-mobile.png",
                    "assets/bee-mobile.png",
                    "assets/bull1-mobile.png",
                    "assets/bull2-mobile.png",
                    "assets/bunny1-mobile.png",
                    "assets/bunny2-mobile.png",
                    "assets/devil-mobile.png",
                    "assets/grey-mobile.png",
                    "assets/leopard-mobile.png",
                    "assets/niulang-mobile.png",
                    "assets/zhinv-mobile.png",
                    "assets/birthday-mobile.png",
                    "assets/detective-mobile.png",
                    "assets/flower-mobile.png",
                    "assets/ghost-mobile.png",
                    "assets/hunhun-mobile.png",
                    "assets/McDonald's-mobile.png",
                    "assets/niuniu-mobile.png",
                    "assets/pumpkin-mobile.png",
                    "assets/witch-mobile.png",
                  ]
                : [
                    "assets/cat.png",
                    "assets/dog.png",
                    "assets/fox1.png",
                    "assets/fox2.png",
                    "assets/bird.png",
                    "assets/angel.png",
                    "assets/bee.png",
                    "assets/bull1.png",
                    "assets/bull2.png",
                    "assets/bunny1.png",
                    "assets/bunny2.png",
                    "assets/devil.png",
                    "assets/grey.png",
                    "assets/leopard.png",
                    "assets/niulang.png",
                    "assets/zhinv.png",
                    "assets/birthday.png",
                    "assets/detective.png",
                    "assets/flower.png",
                    "assets/ghost.png",
                    "assets/hunhun.png",
                    "assets/McDonald's.png",
                    "assets/niuniu.png",
                    "assets/pumpkin.png",
                    "assets/witch.png",
                  ],
              width: 350,
              height: 350,
            },
          };
          let isMobile = window.innerWidth <= 768;
          const currentConfig = isMobile
            ? imageConfig.mobile
            : imageConfig.desktop;
          const preloadContainer = document.querySelector(".preload-container");
          currentConfig.paths.forEach((path) => {
            const img = document.createElement("img");
            img.src = path;
            img.alt = "é¢„åŠ è½½å›¾ç‰‡";
            img.style.display = "none";
            preloadContainer.appendChild(img);
          });
          let currentIndex = Math.floor(
            Math.random() * currentConfig.paths.length
          );
          let selectedImage = currentConfig.paths[currentIndex];
          const randomImage = document.getElementById("randomImage");
          const imageTooltip = document.querySelector(".image-tooltip");
          // è®¾ç½®ä¸€ä¸ªåŠ è½½å ä½å›¾
          randomImage.src =
            'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="500" height="500" viewBox="0 0 300 300"%3E%3Crect width="500" height="500" fill="rgba(223, 203, 178, 0.3)"%3E%3C/rect%3E%3C/svg%3E';
          function updateImage(imgSrc) {
            const img = new Image();
            img.onload = function () {
              randomImage.src = imgSrc;
              randomImage.classList.add("loaded");
            };
            img.onerror = function () {
              if (imgSrc.indexOf("-mobile") > -1) {
                const desktopSrc = imgSrc.replace("-mobile", "");
                updateImage(desktopSrc);
              }
            };
            img.src = imgSrc;
          }
          function switchRandomImage() {
            let newIndex;
            do {
              newIndex = Math.floor(Math.random() * currentConfig.paths.length);
            } while (
              newIndex === currentIndex &&
              currentConfig.paths.length > 1
            );
            currentIndex = newIndex;
            selectedImage = currentConfig.paths[currentIndex];
            randomImage.classList.remove("loaded");
            setTimeout(() => {
              updateImage(selectedImage);
            }, 300);
          }
          updateImage(selectedImage);
          randomImage.onclick = switchRandomImage;
          randomImage.onload = function () {
            if (this.src.indexOf("data:image") === -1) {
              this.classList.add("loaded");
            }
          };
          if (
            randomImage.complete &&
            randomImage.src.indexOf("data:image") === -1
          ) {
            randomImage.classList.add("loaded");
          }
          const imageContainer = document.querySelector(".image-container");
          const isTouchDevice =
            "ontouchstart" in window ||
            navigator.maxTouchPoints > 0 ||
            navigator.msMaxTouchPoints > 0;
          if (!isTouchDevice) {
            imageContainer.addEventListener("mousemove", function (e) {
              const rect = imageContainer.getBoundingClientRect();
              const x = e.clientX - rect.left;
              const y = e.clientY - rect.top;
              imageTooltip.style.left = x + 10 + "px";
              imageTooltip.style.top = y - 30 + "px";
              imageTooltip.style.visibility = "visible";
              imageTooltip.style.opacity = "1";
            });
            imageContainer.addEventListener("mouseleave", function () {
              imageTooltip.style.visibility = "hidden";
              imageTooltip.style.opacity = "0";
            });
          } else {
            imageContainer.addEventListener("click", function (e) {
              if (
                imageTooltip.style.visibility === "hidden" ||
                imageTooltip.style.opacity === "0"
              ) {
                imageTooltip.style.visibility = "visible";
                imageTooltip.style.opacity = "1";
                const rect = imageContainer.getBoundingClientRect();
                imageTooltip.style.left = "50%";
                imageTooltip.style.top = rect.height - 60 + "px";
                imageTooltip.style.transform = "translateX(-50%)";
                setTimeout(() => {
                  imageTooltip.style.opacity = "0";
                  setTimeout(() => {
                    imageTooltip.style.visibility = "hidden";
                  }, 300);
                }, 2000);
              }
            });
          }
          let resizeTimer;
          window.addEventListener("resize", function () {
            clearTimeout(resizeTimer);
            resizeTimer = setTimeout(function () {
              const newIsMobile = window.innerWidth <= 768;
              if (newIsMobile !== isMobile) {
                isMobile = newIsMobile;
                updateImage(currentConfig.paths[currentIndex]);
              }
            }, 250);
          });
          window.dispatchEvent(new Event("resize"));
          window.addEventListener("orientationchange", function () {
            setTimeout(function () {
              if (
                isTouchDevice &&
                imageTooltip.style.visibility === "visible"
              ) {
                const rect = imageContainer.getBoundingClientRect();
                imageTooltip.style.left = "50%";
                imageTooltip.style.top = rect.height - 60 + "px";
              }
            }, 300);
          });
          if (isTouchDevice) {
            const allLinks = document.querySelectorAll(".normal-content a");
            allLinks.forEach((link) => {
              link.addEventListener("touchstart", function () {
                this.style.transform = "scale(0.98)";
              });
              link.addEventListener("touchend", function () {
                this.style.transform = "scale(1)";
              });
            });
          }
        });
      });
    </script>
  </body>
</html>
