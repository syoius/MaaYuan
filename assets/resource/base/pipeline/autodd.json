{
  "地宫助手启动": {
    "recognition": {
      "type": "DirectHit",
      "param": {}
    },
    "action": {
      "type": "DoNothing",
      "param": {}
    },
    "next": [
      "自动地宫-有未打的地宫",
      "开始寻找地宫层数",
      "[JumpBack]进入界面-地宫"
    ]
  },
  "自动地宫-有未打的地宫": {
    "recognition": {
      "type": "TemplateMatch",
      "param": {
        "template": [
          "deepdungeon/todo1.png",
          "deepdungeon/todo2.png",
          "deepdungeon/todo3.png",
          "deepdungeon/todo4.png"
        ],
        "order_by": "Score",
        "threshold": 0.8
      }
    },
    "action": {
      "type": "DoNothing",
      "param": {}
    },
    "next": ["自动地宫-识别未打的地宫", "自动地宫-识别未打的地宫-boss"]
  },
  "自动地宫-识别未打的地宫": {
    "recognition": {
      "type": "TemplateMatch",
      "param": {
        "template": ["deepdungeon/todo1.png", "deepdungeon/todo2.png"],
        "order_by": "Score",
        "threshold": 0.8
      }
    },
    "action": {
      "type": "Click",
      "param": {}
    },
    "pre_delay": 500,
    "next": ["自动地宫-进入地宫关卡"]
  },
  "自动地宫-识别未打的地宫-boss": {
    "recognition": {
      "type": "TemplateMatch",
      "param": {
        "template": ["deepdungeon/todo3.png", "deepdungeon/todo4.png"],
        "order_by": "Score",
        "threshold": 0.8
      }
    },
    "action": {
      "type": "Click",
      "param": {}
    },
    "pre_delay": 500,
    "next": ["洛阳铲不足check", "自动地宫-进入地宫关卡"]
  },
  "自动地宫-进入地宫关卡": {
    "recognition": {
      "type": "OCR",
      "param": {
        "expected": "战斗",
        "replace": [
          ["戰", "战"],
          ["戦", "战"],
          ["鬥", "斗"]
        ],
        "roi": [188, 760, 349, 101]
      }
    },
    "action": {
      "type": "Click",
      "param": {}
    },
    "pre_delay": 500,
    "next": [
      "洛阳铲不足check",
      "自动地宫-检测是否boss层",
      "自动地宫-切换到主队伍"
    ]
  },
  "自动地宫-检测是否boss层": {
    "recognition": {
      "type": "OCR",
      "param": {
        "expected": "(^|[^\\d])(?:[1-9]\\d*[05]|5)($|[^\\d])",
        "roi": [287, 112, 147, 68]
      }
    },
    "action": {
      "type": "DoNothing",
      "param": {}
    }
  },
  "自动地宫-切换到主队伍": {
    "recognition": {
      "type": "OCR",
      "param": {
        "expected": "开始战斗",
        "replace": [
          ["開", "开"],
          ["戰", "战"],
          ["戦", "战"],
          ["鬥", "斗"]
        ],
        "roi": [207, 1112, 311, 158]
      }
    },
    "action": {
      "type": "DoNothing",
      "param": {}
    },
    "next": ["自动地宫-切换至队伍2"]
  },
  "自动地宫-准备开始战斗": {
    "recognition": {
      "type": "OCR",
      "param": {
        "expected": "开始战斗",
        "replace": [
          ["開", "开"],
          ["戰", "战"],
          ["戦", "战"],
          ["鬥", "斗"]
        ],
        "roi": [207, 1112, 311, 158]
      }
    },
    "action": {
      "type": "Click",
      "param": {}
    },
    "pre_delay": 500,
    "timeout": 60000,
    "next": ["自动地宫-需要换队伍", "自动地宫-战斗中"]
  },
  "自动地宫-需要换队伍": {
    "recognition": {
      "type": "OCR",
      "param": {
        "expected": "取消",
        "roi": [71, 703, 277, 127]
      }
    },
    "action": {
      "type": "Click",
      "param": {}
    },
    "pre_delay": 500,
    "next": ["自动地宫-切换至队伍3"]
  },
  "自动地宫-需要换队伍-autoagent": {
    "recognition": {
      "type": "OCR",
      "param": {
        "expected": "取消",
        "roi": [71, 703, 277, 127]
      }
    },
    "action": {
      "type": "DoNothing",
      "param": {}
    },
    "next": [
      "自动地宫-禁火",
      "自动地宫-禁水",
      "自动地宫-禁地",
      "自动地宫-禁风",
      "自动地宫-禁阳",
      "自动地宫-禁阴"
    ]
  },
  "自动地宫-战斗中": {
    "recognition": {
      "type": "OCR",
      "param": {
        "expected": "回合",
        "roi": [574, 23, 111, 83]
      }
    },
    "action": {
      "type": "DoNothing",
      "param": {}
    },
    "post_delay": 1000,
    "timeout": 300000,
    "next": ["自动地宫-下一层", "通用-战斗失败", "[JumpBack]开一下自动"],
    "on_error": ["战斗超时"]
  },
  "自动地宫-下一层": {
    "recognition": {
      "type": "OCR",
      "param": {
        "expected": "下",
        "roi": [363, 1079, 289, 109]
      }
    },
    "action": {
      "type": "Click",
      "param": {}
    },
    "pre_delay": 500,
    "timeout": 5000,
    "next": ["自动地宫-检测是否boss层", "自动地宫-切换到主队伍"],
    "on_error": ["自动地宫-结束战斗"]
  },
  "自动地宫-结束战斗": {
    "recognition": {
      "type": "DirectHit",
      "param": {}
    },
    "action": {
      "type": "DoNothing",
      "param": {}
    },
    "focus": "洛阳铲已耗尽，尝试领取奖励",
    "timeout": 4000,
    "next": ["自动地宫-领取奖励"],
    "on_error": ["地宫奖励启动"]
  },
  "自动地宫-领取奖励": {
    "recognition": {
      "type": "TemplateMatch",
      "param": {
        "template": "reddot.png",
        "roi": [164, 240, 61, 47]
      }
    },
    "action": {
      "type": "Click",
      "param": {}
    },
    "pre_delay": 500,
    "timeout": 4000,
    "next": ["自动地宫-有星星奖励"],
    "on_error": ["自动地宫-关闭星星奖励"]
  },
  "自动地宫-有星星奖励": {
    "recognition": {
      "type": "OCR",
      "param": {
        "expected": ["领取"],
        "replace": ["領", "领取"]
      }
    },
    "action": {
      "type": "Click",
      "param": {}
    },
    "pre_delay": 500,
    "next": ["自动地宫-获取星星奖励"]
  },
  "自动地宫-获取星星奖励": {
    "recognition": {
      "type": "TemplateMatch",
      "param": {
        "template": "common_reward.png",
        "green_mask": true,
        "threshold": 0.5,
        "roi": [33, 53, 663, 478]
      }
    },
    "action": {
      "type": "Click",
      "param": {
        "target": [571, 47, 16, 8]
      }
    },
    "pre_delay": 500,
    "post_delay": 2000,
    "next": ["自动地宫-关闭星星奖励"]
  },
  "自动地宫-关闭星星奖励": {
    "recognition": {
      "type": "DirectHit",
      "param": {}
    },
    "action": {
      "type": "Click",
      "param": {
        "target": [661, 228, 11, 11]
      }
    },
    "focus": "已获取集星累计奖励",
    "next": ["地宫奖励启动"]
  },
  "自动地宫-禁火": {
    "recognition": {
      "type": "OCR",
      "param": {
        "expected": "火"
      }
    },
    "action": {
      "type": "Click",
      "param": {
        "target": "自动地宫-需要换队伍"
      }
    },
    "next": [
      "自动地宫-切换至队伍1",
      "自动地宫-切换至队伍2",
      "自动地宫-切换至队伍3"
    ]
  },
  "自动地宫-禁水": {
    "recognition": {
      "type": "OCR",
      "param": {
        "expected": "水"
      }
    },
    "action": {
      "type": "Click",
      "param": {
        "target": "自动地宫-需要换队伍"
      }
    },
    "next": [
      "自动地宫-切换至队伍1",
      "自动地宫-切换至队伍2",
      "自动地宫-切换至队伍3"
    ]
  },
  "自动地宫-禁地": {
    "recognition": {
      "type": "OCR",
      "param": {
        "expected": "地"
      }
    },
    "action": {
      "type": "Click",
      "param": {
        "target": "自动地宫-需要换队伍"
      }
    },
    "next": [
      "自动地宫-切换至队伍1",
      "自动地宫-切换至队伍2",
      "自动地宫-切换至队伍3"
    ]
  },
  "自动地宫-禁风": {
    "recognition": {
      "type": "OCR",
      "param": {
        "expected": "风",
        "replace": ["風", "风"]
      }
    },
    "action": {
      "type": "Click",
      "param": {
        "target": "自动地宫-需要换队伍"
      }
    },
    "next": [
      "自动地宫-切换至队伍1",
      "自动地宫-切换至队伍2",
      "自动地宫-切换至队伍3"
    ]
  },
  "自动地宫-禁阳": {
    "recognition": {
      "type": "OCR",
      "param": {
        "expected": "阳",
        "replace": ["陽", "阳"]
      }
    },
    "action": {
      "type": "Click",
      "param": {
        "target": "自动地宫-需要换队伍"
      }
    },
    "next": [
      "自动地宫-切换至队伍1",
      "自动地宫-切换至队伍2",
      "自动地宫-切换至队伍3"
    ]
  },
  "自动地宫-禁阴": {
    "recognition": {
      "type": "OCR",
      "param": {
        "expected": "阴",
        "replace": ["陰", "阴"]
      }
    },
    "action": {
      "type": "Click",
      "param": {
        "target": "自动地宫-需要换队伍"
      }
    },
    "next": ["自动地宫-切换至队伍3"]
  },
  "自动地宫-切换至队伍1": {
    "recognition": {
      "type": "DirectHit",
      "param": {}
    },
    "action": {
      "type": "Click",
      "param": {
        "target": [106, 705, 47, 14]
      }
    },
    "pre_delay": 500,
    "next": ["洛阳铲不足check", "自动地宫-准备开始战斗"]
  },
  "自动地宫-切换至队伍2": {
    "recognition": {
      "type": "DirectHit",
      "param": {}
    },
    "action": {
      "type": "Click",
      "param": {
        "target": [227, 711, 37, 9]
      }
    },
    "pre_delay": 500,
    "next": ["洛阳铲不足check", "自动地宫-准备开始战斗"]
  },
  "自动地宫-切换至队伍3": {
    "recognition": {
      "type": "DirectHit",
      "param": {}
    },
    "action": {
      "type": "Click",
      "param": {
        "target": [339, 707, 43, 12]
      }
    },
    "pre_delay": 500,
    "next": ["洛阳铲不足check", "自动地宫-准备开始战斗"]
  }
}
