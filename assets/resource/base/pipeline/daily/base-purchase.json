{
  "据点买东西启动": {
    "recognition": { "type": "DirectHit", "param": {} },
    "action": { "type": "DoNothing", "param": {} },
    "focus": "开始据点商人购物",
    "next": [
      "进入行脚商人",
      "选择行商",
      "[JumpBack]据点购买-开始寻找洛阳据点",
      "[JumpBack]进入界面-据点"
    ]
  },
  "据点购买-开始寻找洛阳据点": {
    "recognition": {
      "type": "TemplateMatch",
      "param": {
        "template": "base/base_check.png",
        "roi": [2, 1060, 182, 206],
        "green_mask": true
      }
    },
    "action": { "type": "DoNothing", "param": {} },
    "next": [
      "据点购买-OCR找到洛阳据点",
      "据点购买-TM找到洛阳据点",
      "[JumpBack]右滑-整屏"
    ]
  },
  "据点购买-OCR找到洛阳据点": {
    "recognition": {
      "type": "OCR",
      "param": { "expected": "阳", "roi": [1, 597, 719, 142] }
    },
    "action": { "type": "Click", "param": {} },
    "post_delay": 2000
  },
  "据点购买-TM找到洛阳据点": {
    "recognition": {
      "type": "TemplateMatch",
      "param": { "template": "base/luoyang.png", "roi": [1, 550, 719, 142] }
    },
    "action": { "type": "Click", "param": {} },
    "post_delay": 2000
  },
  "进入行脚商人": {
    "recognition": {
      "type": "OCR",
      "param": { "expected": "前往", "roi": [520, 891, 104, 40] }
    },
    "action": { "type": "Click", "param": {} },
    "post_delay": 1000,
    "timeout": 5000,
    "next": ["选择行商"]
  },
  "选择行商": {
    "recognition": {
      "type": "OCR",
      "param": {
        "expected": "商品",
        "replace": ["周", "商"],
        "roi": [355, 346, 358, 83]
      }
    },
    "action": { "type": "Click", "param": { "target": [61, 166, 54, 49] } },
    "post_delay": 1000,
    "timeout": 5000,
    "next": [
      "[JumpBack]行商选择商品",
      "[JumpBack]是否在最顶端",
      "[JumpBack]是否在最底端",
      "[JumpBack]刷新商品"
    ]
  },
  "是否在最顶端": {
    "recognition": {
      "type": "TemplateMatch",
      "param": {
        "template": "base/base-purchase-upper.png",
        "roi": [0, 385, 720, 128]
      }
    },
    "action": { "type": "DoNothing", "param": {} },
    "post_delay": 1000,
    "timeout": 3000,
    "enabled": false,
    "next": ["向下寻找商品1"]
  },
  "是否在最底端": {
    "recognition": {
      "type": "TemplateMatch",
      "param": {
        "template": "base/base-purchase-bottom.png",
        "roi": [0, 1178, 720, 101]
      }
    },
    "action": { "type": "DoNothing", "param": {} },
    "post_delay": 1000,
    "timeout": 3000,
    "enabled": false,
    "next": ["向上寻找商品1"]
  },
  "行商选择商品": {
    "recognition": {
      "type": "OCR",
      "param": { "expected": "登", "roi": [46, 443, 612, 836] }
    },
    "action": { "type": "Click", "param": {} },
    "post_delay": 1000,
    "timeout": 1000,
    "next": [
      "据点商人购物-需要购买的数量",
      "确认情报兑换",
      "粟米不足",
      "[JumpBack]据点商人购物-增加购买的数量"
    ],
    "on_error": ["确认购买商品"]
  },
  "向上寻找商品1": {
    "recognition": { "type": "DirectHit", "param": {} },
    "action": {
      "type": "Swipe",
      "param": { "begin": [560, 926, 1, 1], "end": [[559, 1231, 1, 1]] }
    },
    "post_delay": 3000,
    "timeout": 500,
    "next": ["向上寻找商品2"]
  },
  "向上寻找商品2": {
    "recognition": { "type": "DirectHit", "param": {} },
    "action": {
      "type": "Swipe",
      "param": { "begin": [560, 926, 1, 1], "end": [[559, 1231, 1, 1]] }
    },
    "post_delay": 3000
  },
  "向下寻找商品1": {
    "recognition": { "type": "DirectHit", "param": {} },
    "action": {
      "type": "Swipe",
      "param": { "begin": [559, 1231, 1, 1], "end": [[560, 926, 1, 1]] }
    },
    "post_delay": 3000,
    "timeout": 500,
    "next": ["向下寻找商品2"]
  },
  "向下寻找商品2": {
    "recognition": { "type": "DirectHit", "param": {} },
    "action": {
      "type": "Swipe",
      "param": { "begin": [559, 1231, 1, 1], "end": [[560, 926, 1, 1]] }
    },
    "post_delay": 3000
  },
  "刷新商品": {
    "recognition": {
      "type": "OCR",
      "param": {
        "expected": "商品",
        "replace": ["周", "商"],
        "roi": [355, 346, 358, 83]
      }
    },
    "action": { "type": "Click", "param": { "target": [667, 376, 43, 43] } },
    "post_delay": 1000,
    "focus": "进行免费刷新",
    "next": ["点击免费刷新", "免费刷新check"]
  },
  "点击免费刷新": {
    "recognition": {
      "type": "OCR",
      "param": {
        "expected": "免费",
        "replace": ["免費", "免费"],
        "roi": [399, 720, 273, 86]
      }
    },
    "action": { "type": "Click", "param": {} },
    "pre_delay": 500,
    "post_delay": 1000
  },
  "免费刷新check": {
    "recognition": {
      "type": "OCR",
      "param": { "expected": "白金", "roi": [142, 458, 429, 72] }
    },
    "action": { "type": "Click", "param": { "target": [666, 392, 30, 34] } },
    "timeout": 2000,
    "focus": "免费刷新次数已耗尽，停止任务",
    "next": ["stop"]
  },
  "确认情报兑换": {
    "recognition": {
      "type": "OCR",
      "param": { "expected": "定", "roi": [368, 727, 269, 82] }
    },
    "action": { "type": "Click", "param": {} },
    "post_wait_freezes": 1000,
    "timeout": 10000,
    "next": [
      "据点商人购物-需要购买的数量",
      "[JumpBack]据点商人购物-增加购买的数量"
    ]
  },
  "确认购买商品": {
    "recognition": {
      "type": "OCR",
      "param": {
        "expected": "购买",
        "replace": ["買", "购买"],
        "roi": [142, 680, 527, 237]
      }
    },
    "action": { "type": "Click", "param": {} },
    "post_wait_freezes": 1000,
    "timeout": 10000,
    "next": ["关闭商品获得界面", "粟米不足", "关闭购买页面"],
    "on_error": ["stop"]
  },
  "据点商人购物-需要购买的数量": {
    "recognition": {
      "type": "OCR",
      "param": {
        "model": "en",
        "only_rec": true,
        "expected": "1",
        "roi": [335, 717, 52, 43]
      }
    },
    "action": { "type": "DoNothing", "param": {} },
    "post_wait_freezes": 1000,
    "timeout": 500,
    "next": ["确认购买商品"]
  },
  "据点商人购物-增加购买的数量": {
    "recognition": { "type": "DirectHit", "param": {} },
    "action": { "type": "Click", "param": { "target": [470, 723, 53, 38] } },
    "post_delay": 1000
  },
  "粟米不足": {
    "recognition": {
      "type": "OCR",
      "param": { "expected": "前往", "roi": [427, 581, 193, 357] }
    },
    "action": { "type": "Click", "param": { "target": [648, 123, 34, 45] } },
    "pre_delay": 1000,
    "post_delay": 1000,
    "next": ["关闭购买页面", "stop"]
  },
  "关闭购买页面": {
    "recognition": {
      "type": "OCR",
      "param": {
        "expected": "购买",
        "replace": ["買", "购买"],
        "roi": [142, 680, 527, 237]
      }
    },
    "action": { "type": "Click", "param": { "target": [658, 316, 36, 39] } },
    "pre_delay": 1000,
    "post_delay": 1000,
    "focus": "所需的道具数量不足，停止任务",
    "next": ["stop"]
  },
  "关闭商品获得界面": {
    "recognition": {
      "type": "TemplateMatch",
      "param": {
        "template": "common_reward.png",
        "green_mask": true,
        "roi": [14, 23, 684, 597],
        "threshold": 0.5
      }
    },
    "action": { "type": "Click", "param": { "target": [633, 22, 19, 11] } },
    "pre_delay": 700,
    "post_wait_freezes": 1000,
    "focus": "购买据点商品成功！",
    "next": ["刷新商品"]
  }
}
